{"ast":null,"code":"var _jsxFileName = \"/Users/aha1/Desktop/car-share/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport Strapi from 'strapi-sdk-javascript/build/main';\nimport CarPicker from './VehiclePicker';\nimport { convertStrToDate } from './util/DateFormat';\nimport { getVehicles } from './api';\nimport NewCalendar from \"./DatePicker\"; // import { StyleProvider, ThemeProvider } from \"vcc-ui\";\n// import volvo from \"vcc-ui/lib/themes/volvo\";\n//============================================================================//\n\nconst strapi = new Strapi(\"http://localhost:1337\");\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.onSelectCalendarDates = requested => {\n      this.setState({\n        loadingVehicleData: true\n      });\n      let availableVehs;\n      const reservationData = this.state.reservationData;\n      /*\n      for (let i = 0; i < reservationData.length; i++) {\n        const iStartDate = convertStrToDate(reservationData[i].start_time);\n        const iEndDate = convertStrToDate(reservationData[i].end_time);\n         // descr: requested START is ok if\n        //    1) After iStartDate OR\n        //    2) Same day as iStartDate, but in afternoon\n        console.log(requested.start.date > iStartDate)\n        console.log(requested.start.date === iStartDate)\n        if (requested.start.date > iStartDate ||\n          (requested.start.date === iStartDate && requested.start.timeOfDay === \"afternoon\")\n        ) {\n          debugger;\n        } else {\n          // invalid\n          debugger;\n        }\n         // descr: requested END is ok if\n        //    1) Before iStartDate OR\n        //    2) Same day as iStartDate, but in morning\n        if (requested.end.date < iStartDate ||\n          (requested.end.date === iStartDate && requested.end.timeOfDay === \"morning\")\n        ) {\n          debugger;\n        } else {\n          // invalid\n          debugger;\n        }\n        console.log(iStartDate, iEndDate);\n        debugger;\n        // availableVehs.push(reservationData[i])\n      }\n      */\n\n      availableVehs = this.state.vehicleData;\n      this.setState({\n        availableVehicles: availableVehs,\n        loadingVehicleData: false,\n        clickedCtaBtn: true\n      });\n    };\n\n    this.showCarPicker = () => {\n      if (this.state.loadingVehicleData) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Loading vehicle data...\");\n      } else if (this.state.availableVehicles.length > 0) {\n        return React.createElement(CarPicker, {\n          availableVehicles: this.state.availableVehicles,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        });\n      } else if (this.state.clickedCtaBtn) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \"No vehicles found for dates you provided :(\");\n      }\n    };\n\n    this.state = {\n      clickedCtaBtn: false,\n      loadingReservationData: true,\n      loadingVehicleData: false,\n      vehicleData: [],\n      reservationData: [],\n      globalError: false,\n      availableVehicles: []\n    };\n  }\n\n  componentDidMount() {\n    getVehicles().then(vehicles => {\n      vehicles.json().then(vehicleData => {\n        this.setState({\n          vehicleData: vehicleData\n        });\n        return strapi.getEntries(\"reservations\");\n      }).then(reservationData => {\n        this.setState({\n          reservationData: reservationData,\n          loadingReservationData: false\n        });\n      });\n    }).catch(err => {\n      console.error(err);\n      this.setState({\n        globalError: true,\n        loadingReservationData: false\n      });\n    });\n  }\n\n  render() {\n    console.log('reservationData: ', this.state.reservationData);\n    console.log('vehicleData: ', this.state.vehicleData);\n\n    if (this.state.loadingReservationData) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Loading reservation data...\");\n    }\n\n    if (this.state.globalError) {\n      return React.createElement(\"main\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \":( Error occurred while fetching information. Please try again later\");\n    } else {\n      return React.createElement(\"main\", {\n        className: \"content-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(NewCalendar, {\n        onSelectCalendarDates: this.onSelectCalendarDates,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), this.showCarPicker());\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/aha1/Desktop/car-share/frontend/src/App.js"],"names":["React","Component","Strapi","CarPicker","convertStrToDate","getVehicles","NewCalendar","strapi","App","constructor","onSelectCalendarDates","requested","setState","loadingVehicleData","availableVehs","reservationData","state","vehicleData","availableVehicles","clickedCtaBtn","showCarPicker","length","loadingReservationData","globalError","componentDidMount","then","vehicles","json","getEntries","catch","err","console","error","render","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Strapi from 'strapi-sdk-javascript/build/main';\nimport CarPicker from './VehiclePicker';\nimport { convertStrToDate } from './util/DateFormat';\n\nimport { getVehicles } from './api';\nimport NewCalendar from \"./DatePicker\";\n// import { StyleProvider, ThemeProvider } from \"vcc-ui\";\n// import volvo from \"vcc-ui/lib/themes/volvo\";\n//============================================================================//\n\nconst strapi = new Strapi(\"http://localhost:1337\");\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      clickedCtaBtn: false,\n      loadingReservationData: true,\n      loadingVehicleData: false,\n      vehicleData: [],\n      reservationData: [],\n      globalError: false,\n      availableVehicles: []\n    }\n  }\n\n  componentDidMount() {\n    getVehicles()\n      .then(vehicles => {vehicles.json()\n        .then(vehicleData => {\n          this.setState({ vehicleData: vehicleData });\n          return strapi.getEntries(\"reservations\");\n        })\n        .then(reservationData => {\n          this.setState({ reservationData: reservationData, loadingReservationData: false });\n        })\n      })\n      .catch(err => {\n        console.error(err);\n        this.setState({globalError: true, loadingReservationData: false });\n      })\n  }\n\n  onSelectCalendarDates = (requested) => {\n    this.setState({ loadingVehicleData: true });\n    let availableVehs;\n    const { reservationData } = this.state;\n    /*\n    for (let i = 0; i < reservationData.length; i++) {\n      const iStartDate = convertStrToDate(reservationData[i].start_time);\n      const iEndDate = convertStrToDate(reservationData[i].end_time);\n\n      // descr: requested START is ok if\n      //    1) After iStartDate OR\n      //    2) Same day as iStartDate, but in afternoon\n      console.log(requested.start.date > iStartDate)\n      console.log(requested.start.date === iStartDate)\n      if (requested.start.date > iStartDate ||\n        (requested.start.date === iStartDate && requested.start.timeOfDay === \"afternoon\")\n      ) {\n        debugger;\n      } else {\n        // invalid\n        debugger;\n      }\n\n      // descr: requested END is ok if\n      //    1) Before iStartDate OR\n      //    2) Same day as iStartDate, but in morning\n      if (requested.end.date < iStartDate ||\n        (requested.end.date === iStartDate && requested.end.timeOfDay === \"morning\")\n      ) {\n        debugger;\n      } else {\n        // invalid\n        debugger;\n      }\n      console.log(iStartDate, iEndDate);\n      debugger;\n      // availableVehs.push(reservationData[i])\n    }\n    */\n    availableVehs = this.state.vehicleData;\n    this.setState({ availableVehicles: availableVehs, loadingVehicleData: false, clickedCtaBtn: true})\n  };\n\n  showCarPicker = () => {\n    if (this.state.loadingVehicleData) {\n      return <div>Loading vehicle data...</div>\n    } else if (this.state.availableVehicles.length > 0) {\n      return <CarPicker availableVehicles={this.state.availableVehicles}/>\n    } else if (this.state.clickedCtaBtn) {\n      return <div>No vehicles found for dates you provided :(</div>\n    }\n  };\n\n  render() {\n    console.log('reservationData: ', this.state.reservationData);\n    console.log('vehicleData: ', this.state.vehicleData);\n    if (this.state.loadingReservationData) {\n      return <div>Loading reservation data...</div>\n    }\n    if (this.state.globalError) {\n      return <main>:( Error occurred while fetching information. Please try again later</main>\n    } else {\n      return (\n        <main className='content-container'>\n          <NewCalendar onSelectCalendarDates={this.onSelectCalendarDates}/>\n          {/*<CalendarComponent onSelectCalendarDates={this.onSelectCalendarDates}/>*/}\n          {this.showCarPicker()}\n        </main>\n      );\n    }\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}