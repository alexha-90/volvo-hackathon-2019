import React, { Component } from "react";
import PropTypes from "prop-types";
import { RendererProvider } from "react-fela";
import { styleRenderer } from "./style-renderer";

const clientRenderer = styleRenderer();

export class StyleProvider extends Component {
	static contextTypes = {
		renderer: PropTypes.object
	};

	render() {
		if (this.context.renderer) {
			return this.props.children;
		}

		const renderer = this.props.renderer || clientRenderer;
		return (
			<RendererProvider renderer={renderer}>
				{this.props.children}
			</RendererProvider>
		);
	}
}

export default StyleProvider;
